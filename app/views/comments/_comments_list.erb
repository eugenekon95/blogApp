
<form action="<%= post_path(@post) %>" method='get' id='comments_show'>
  <div class='field'>
    <select name='comments_status' class='btn btn-sm btn-primary' id='comments_select'>
      <option <%= @comment_status == 'published' ? 'selected' : '' %> >Published</option>
      <option <%= @comment_status == 'unpublished' ? 'selected' : '' %> >Unpublished</option>
    </select> 
  </div>
</form>

<% @comments.each do |comment| %>
  <div class container>
  <div class="media mb-4">
          
          <%= image_tag(current_author.avatar, class: "d-flex mr-3 mt-2 ",:width=>100) %>
          <div class="media-body">
            <h5 class="mt-0"><%= comment.author.full_name %></h5>
            <%= comment.body %>
          </div>
            <div>
      <%if comment.created_at < comment.updated_at%><b>edited</b> |<%end%>
      <% less_than_hour = comment.created_at >= 1.hour.ago %>
      <% time = distance_of_time_in_words(comment.created_at, Time.now)%>
     <i> created  <%= time  %> ago</i>
    </div>
        </div>
         <% if logged_in? && current_author.id == comment.author.id && less_than_hour %>   
      <button class='btn btn-warning btn-sm edit_comment'>Edit Comment</button>
      <div class='cont add_comment update_comment invisible'>
        <h4>Edit Comment</h4>
        <%= render 'comments/comment_form', comment: comment%>
      </div>
      <% if comment.status == 'unpublished' %>
        <div class='btn btn-primary btn-sm'>
          <%= link_to 'Publish Comment', publish_post_comment_path(@post.id, comment.id), method: :post %>
        </div>
      <% end %>
      <div class='btn btn-danger btn-sm'>
        <%= link_to 'Destroy Comment', [comment.post, comment],
                  method: :delete,
                  data: { confirm: "Are you sure?" } %>
      </div>
    <% end %>
 </div>
 </div>
<% end %>


